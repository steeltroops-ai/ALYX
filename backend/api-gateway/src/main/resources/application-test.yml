# Test environment configuration
spring:
  datasource:
    url: jdbc:tc:postgresql:15:///testdb
    driver-class-name: org.testcontainers.jdbc.ContainerDatabaseDriver
    hikari:
      maximum-pool-size: 5
      minimum-idle: 1
      
  jpa:
    hibernate:
      ddl-auto: create-drop
    properties:
      hibernate:
        show_sql: true
        format_sql: true
        
  flyway:
    enabled: false  # Disable Flyway for tests using create-drop
    
  redis:
    host: localhost
    port: 6379
    timeout: 1000ms

# JWT configuration for testing
jwt:
  secret: testSecretKeyForJWTTokenValidationThatShouldBeAtLeast256BitsLongForTesting
  expiration: 3600000  # 1 hour for tests
  refresh-expiration: 7200000  # 2 hours for tests

# Security configuration for testing
security:
  password:
    bcrypt-rounds: 4  # Lower rounds for faster tests
  rate-limiting:
    login-attempts: 10  # More lenient for tests
    lockout-duration: 60  # 1 minute
  audit:
    enabled: true
    retention-days: 1

# Disable Eureka for tests
eureka:
  client:
    enabled: false

# Logging for tests
logging:
  level:
    com.alyx.gateway: DEBUG
    org.springframework.security: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.testcontainers: INFO